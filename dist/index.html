<!DOCTYPE html>
<html>
  <head>
    <?!= HtmlService.createHtmlOutputFromFile('css').getContent(); ?>
        <script>
      // Prevent forms from submitting.
      function preventFormSubmit() {
        var forms = document.querySelectorAll('form');
        for (var i = 0; i < forms.length; i++) {
          forms[i].addEventListener('submit', function(event) {
            event.preventDefault();
          });
        }
      }
      window.addEventListener('load', preventFormSubmit);
    </script>
  </head>
  <body>
    <? var config = getConfig(); ?>
    <form id="myForm">
      <fieldset>
        <div class="row">
          <label for="spaceID">Space</label>
          <div class="space-id-field">
            <input id="spaceID" type="text" name="space" value="<?= config.space ?>" tabindex="1" class="space-id-field__id" />
            <select name="domain" tabindex="2" class="space-id-field__domain" />
              <? if (config.domain == "backlog.com") { ?>
                <option value="backlog.com" selected>backlog.com</option>
              <? } else  { ?>
                <option value="backlog.com">backlog.com</option>
              <? } ?>
              <? if (config.domain == "backlog.jp") { ?>
                <option value="backlog.jp" selected>backlog.jp</option>
              <? } else  { ?>
                <option value="backlog.jp">backlog.jp</option>
              <? } ?>
              <? if (config.domain == "backlogtool.com") { ?>
                <option value="backlogtool.com" selected>backlogtool.com</option>
              <? } else  { ?>
                <option value="backlogtool.com">backlogtool.com</option>
              <? } ?>
            </select>
          </div>
        </div>
       <div class="row">
          <label for="apiKey">API Key</label>
          <input id="apiKey" type="text" name="apiKey" value="<?= config.apiKey ?>" tabindex="3" />
        </div>
       <div class="row">
          <label for="projectKey">Project Key</label>
          <input id="projectKey" type="text" name="projectKey" value="<?= config.projectKey ?>" tabindex="4" />
        </div>
        <div class="button-area">
          <button class="button" value="Start" onclick="addClickedMessage()" tabindex="5" />
        </div>
      </fieldset>
    </form>
    <?!= HtmlService.createHtmlOutputFromFile('bundle').getContent(); ?>
    <script>
      window.onload = onLoadHandler
    </script>
  </body>
</html>
